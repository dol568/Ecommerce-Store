import{a as z,b as g,c as H,d as J,e as K,g as x,i as Q,j as W,k as X,n as Z}from"./chunk-HKGWMXVF.js";import{a as Y}from"./chunk-KQE5ZG5Q.js";import{a as w}from"./chunk-DXPTJ4HU.js";import{a as ee}from"./chunk-NGCLXTLF.js";import"./chunk-VRCW3ZRF.js";import{f as G,g as R,i as L,q as U}from"./chunk-HLRN3ODD.js";import{Cb as n,Db as D,Eb as $,Kb as _,Mb as C,Ob as F,Pb as A,Ua as a,Ya as q,ba as y,cb as S,d as u,e as v,ea as h,eb as m,f as V,ja as O,jb as t,jc as j,ka as N,kb as r,kc as B,lb as p,lc as M,mc as T,ob as P,rb as b,rc as k,tb as I}from"./chunk-HJS56J6Z.js";function ae(i,o){i&1&&(t(0,"span",25),n(1,"Please add item(s) to the cart to proceed. "),r())}var E=i=>({"is-invalid":i});function me(i,o){if(i&1){let e=P();t(0,"div",1)(1,"h4",2),n(2,"Shipping Address"),r(),t(3,"form",3),b("ngSubmit",function(){O(e);let l=I();return N(l.submitFunc())}),t(4,"div",4)(5,"div",5)(6,"label",6),n(7,"Name"),r(),p(8,"input",7),t(9,"div",8),n(10," Valid name is required "),r()()(),t(11,"div",2)(12,"label",9),n(13,"Street"),r(),p(14,"input",10),t(15,"div",8),n(16," Please enter your street "),r()(),t(17,"div",2)(18,"label",11),n(19,"City"),r(),p(20,"input",12),t(21,"div",8),n(22," Please enter your city "),r()(),t(23,"div",4)(24,"div",13)(25,"label",14),n(26,"Country"),r(),p(27,"input",15),t(28,"div",8),n(29," Please enter your country "),r()(),t(30,"div",16)(31,"label",17),n(32,"Province"),r(),p(33,"input",18),t(34,"div",8),n(35," Please enter your province. "),r()(),t(36,"div",19)(37,"label",20),n(38,"Postal Code"),r(),p(39,"input",21),t(40,"div",8),n(41," Please enter your Postal Code. "),r()()(),p(42,"hr",22),t(43,"button",23),F(44,"async"),n(45,"Buy Now "),r(),p(46,"br")(47,"br"),S(48,ae,2,0,"span",24),F(49,"async"),r()()}if(i&2){let e=I();a(3),m("formGroup",e.AddressForm),a(5),m("ngClass",C(13,E,e.AddressForm.get("name").errors&&e.AddressForm.get("name").touched)),a(6),m("ngClass",C(15,E,e.AddressForm.get("street").errors&&e.AddressForm.get("street").touched)),a(6),m("ngClass",C(17,E,e.AddressForm.get("city").errors&&e.AddressForm.get("city").touched)),a(7),m("ngClass",C(19,E,e.AddressForm.get("country").errors&&e.AddressForm.get("country").touched)),a(6),m("ngClass",C(21,E,e.AddressForm.get("province").errors&&e.AddressForm.get("province").touched)),a(6),m("ngClass",C(23,E,e.AddressForm.get("postalCode").errors&&e.AddressForm.get("postalCode").touched)),a(4),m("disabled",!e.AddressForm.valid||A(44,9,e.cart$).total===0),a(5),m("ngIf",!e.AddressForm.valid||A(49,11,e.cart$).total===0)}}var re=(()=>{var o,e;let d=class d{constructor(){v(this,o,void 0);v(this,e,void 0);V(this,o,y(Y)),V(this,e,y(w)),this.finishOrder=new q,this.setupForm({name:"",street:"",city:"",province:"",postalCode:"",country:""}),this.getUserAddress()}ngOnInit(){this.cart$=u(this,e).cart$}setupForm(s){this.AddressForm=new K({name:new x(s.name??"",[g.required]),street:new x(s.street??"",[g.required]),city:new x(s.city??"",[g.required]),province:new x(s.province??"",[g.required]),postalCode:new x(s.postalCode??"",[g.required]),country:new x(s.country??"",[g.required])})}getUserAddress(){u(this,o).address$().subscribe({next:s=>this.setupForm(s),error:s=>console.error(s)})}submitFunc(){this.finishOrder.emit(this.AddressForm.value)}};o=new WeakMap,e=new WeakMap,d.\u0275fac=function(c){return new(c||d)},d.\u0275cmp=h({type:d,selectors:[["app-address"]],outputs:{finishOrder:"finishOrder"},standalone:!0,features:[_],decls:2,vars:3,consts:[["class","main",4,"ngIf"],[1,"main"],[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","street"],["type","text","id","street","formControlName","street",1,"form-control",3,"ngClass"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control",3,"ngClass"],[1,"col-md-5","mb-3"],["for","country"],["type","text","id","country","formControlName","country",1,"form-control",3,"ngClass"],[1,"col-md-4","mb-3"],["for","province"],["type","text","id","province","formControlName","province",1,"form-control",3,"ngClass"],[1,"col-md-3","mb-3"],["for","postalCode"],["type","text","id","postalCode","formControlName","postalCode",1,"form-control",3,"ngClass"],[1,"mb-4"],["type","submit",1,"btn-primary","btn-lg","btn","buy-now",3,"disabled"],["class","text-secondary",4,"ngIf"],[1,"text-secondary"]],template:function(c,f){c&1&&(S(0,me,50,25,"div",0),F(1,"async")),c&2&&m("ngIf",A(1,1,f.cart$))},dependencies:[k,j,M,T,Z,Q,z,H,J,W,X]});let i=d;return i})();function de(i,o){if(i&1){let e=P();t(0,"li",6)(1,"div")(2,"h6",7),n(3),r(),t(4,"small",2),n(5),r()(),t(6,"span",2),n(7),t(8,"i",8),b("click",function(){let s=O(e).$implicit,c=I(2);return N(c.deleteCartItem(s.productId))}),r()()()}if(i&2){let e=o.$implicit;a(2),m("routerLink","/shop/"+e.productId),a(),$(" ",e.productName," "),a(2),D(e.quantity),a(2),$("$",e.unitPrice," ")}}function le(i,o){if(i&1&&(t(0,"div")(1,"h4",1)(2,"span",2),n(3,"Your cart"),r(),t(4,"span"),n(5),r()(),t(6,"ul",3),S(7,de,9,4,"li",4),t(8,"li",5)(9,"span"),n(10,"Total (CAD)"),r(),t(11,"strong"),n(12),r()()()()),i&2){let e=o.ngIf;a(5),D(e.totalItems),a(2),m("ngForOf",e.cartItems),a(5),$("$",e.total,"")}}var ie=(()=>{var o;let e=class e{constructor(){v(this,o,y(w))}ngOnInit(){this.cart$=u(this,o).cart$}deleteCartItem(l){u(this,o).removeItemFromCart(l).subscribe({error:s=>console.error(s)})}};o=new WeakMap,e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=h({type:e,selectors:[["app-cart"]],standalone:!0,features:[_],decls:2,vars:3,consts:[[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[1,"list-group","mb-3"],["class","list-group-item d-flex justify-content-between lh-condensed",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"my-0",3,"routerLink"],[1,"fas","fa-trash-alt",3,"click"]],template:function(s,c){s&1&&(S(0,le,13,3,"div",0),F(1,"async")),s&2&&m("ngIf",A(1,1,c.cart$))},dependencies:[L,R,k,B,M,T]});let i=e;return i})();var qe=(()=>{var o,e,d;let l=class l{constructor(){v(this,o,y(ee));v(this,e,y(w));v(this,d,y(G))}ngOnInit(){}submitOrder(c){u(this,o).addOrder(c).subscribe({next:()=>u(this,e).clearCart().subscribe({next:()=>u(this,d).navigate([`/${U}`]),error:f=>console.error(f)}),error:f=>console.error(f)})}};o=new WeakMap,e=new WeakMap,d=new WeakMap,l.\u0275fac=function(f){return new(f||l)},l.\u0275cmp=h({type:l,selectors:[["app-checkout"]],standalone:!0,features:[_],decls:5,vars:0,consts:[[1,"main","row"],[1,"col-md-5","order-md-2","mb-4"],[1,"col-md-7","order-md-1"],[3,"finishOrder"]],template:function(f,ne){f&1&&(t(0,"div",0)(1,"div",1),p(2,"app-cart"),r(),t(3,"div",2)(4,"app-address",3),b("finishOrder",function(oe){return ne.submitOrder(oe)}),r()()())},dependencies:[re,ie],styles:[".main[_ngcontent-%COMP%]{width:80%;margin:auto}.buy-now[_ngcontent-%COMP%]{width:100%}"]});let i=l;return i})();export{qe as CheckoutComponent};
