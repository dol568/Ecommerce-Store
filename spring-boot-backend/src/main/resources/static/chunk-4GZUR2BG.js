import{a as U}from"./chunk-DXPTJ4HU.js";import{a as mt,b as dt,c as ut,d as gt}from"./chunk-VRCW3ZRF.js";import{d as ot,f as at,g as st,i as ct,k as pt,o as lt}from"./chunk-HLRN3ODD.js";import{Ab as Y,Cb as l,Db as b,Eb as V,Fb as Z,Kb as E,Ma as $,Mb as j,Ob as N,Pb as R,Rb as tt,Ua as s,X as L,Ya as G,ba as S,cb as f,d,e as v,ea as I,eb as m,f as y,gb as Q,ja as _,jb as a,jc as et,ka as x,kb as o,kc as q,lb as T,lc as w,mb as J,nb as K,ob as C,p as D,pc as A,qc as it,rb as g,rc as k,t as O,tb as u,wb as M,yb as W,yc as nt,zb as X,zc as rt}from"./chunk-HJS56J6Z.js";var F=class{constructor(){this.brand=null,this.type=null,this.sort="name,asc",this.page=0,this.size=6}};var ht=n=>{let i=new nt;return n&&Object.keys(n).forEach(t=>{n[t]&&(i=i.append(t,n[t]))}),i};var B=(()=>{var i;let t=class t{constructor(){v(this,i,void 0);y(this,i,S(rt)),this.products=[],this.brands=[],this.types=[],this.shopParams=new F,this.searchUrl=mt+gt,this.currentPage=1}products$(){let e=ht(this.shopParams);return d(this,i).get(this.searchUrl,{observe:"response",params:e}).pipe(O(r=>{let p=r.body;return this.products=p.data.page.content,p}))}product$(e){let r=this.products.find(p=>p.id===e);return r?D(r):d(this,i).get(this.searchUrl+"/"+e)}brands$(){return this.brands.length>0?D(this.brands):d(this,i).get(this.searchUrl+dt).pipe(O(e=>{let r=e.data;return this.brands=r,r}))}types$(){return this.types.length>0?D(this.types):d(this,i).get(this.searchUrl+ut).pipe(O(e=>{let r=e.data;return this.types=r,r}))}getShopParams(){return this.shopParams}setShopParams(e){this.shopParams=e}};i=new WeakMap,t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ft=(n,i)=>n.some(t=>t.productId===i),_t=(n,i)=>n?n.find(t=>t.productId===i):null;function It(n,i){if(n&1){let t=C();a(0,"div",2)(1,"div",3),T(2,"img",4),o(),a(3,"div",3)(4,"h3"),l(5),o(),a(6,"p",5),l(7),N(8,"currency"),o(),a(9,"div",6)(10,"i",7),g("click",function(){_(t);let e=u();return x(e.decrementQuantity())}),o(),a(11,"span",8),l(12),o(),a(13,"i",9),g("click",function(){_(t);let e=u();return x(e.incrementQuantity())}),o()(),a(14,"button",10),g("click",function(){_(t);let e=u();return x(e.addItemToCart(e.product.id))}),l(15,"Add To Cart "),o()(),a(16,"div",11)(17,"div",12)(18,"h4"),l(19,"Description"),o(),a(20,"p"),l(21),o()()()()}if(n&2){let t=u();s(2),M("alt",t.product.name),m("src",t.product.pictureUrl||"/default.png",$),s(3),b(t.product.name),s(2),b(R(8,6,t.product.unitPrice)),s(5),b(t.quantity),s(9),b(t.product.description)}}var xt=(()=>{var i,t,c,e;let r=class r{constructor(){v(this,i,void 0);v(this,t,void 0);v(this,c,void 0);v(this,e,void 0);y(this,i,S(U)),y(this,t,S(ot)),y(this,c,S(B)),y(this,e,S(at)),this.quantity=1}ngOnInit(){this.loadProduct()}addItemToCart(h){d(this,i).editCart({productId:h,quantity:this.quantity}).subscribe({next:P=>{d(this,e).navigate([`/${lt}/`])},error:P=>console.error(P)})}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}checkProduct(){let h=d(this,i).getCurrentCartValue().cartItems,P=_t(h,this.product.id);P&&(this.quantity=P.quantity)}loadProduct(){d(this,c).product$(d(this,t).snapshot.paramMap.get("id")).subscribe({next:h=>{this.product=h,this.checkProduct()},error:h=>console.log(h)})}};i=new WeakMap,t=new WeakMap,c=new WeakMap,e=new WeakMap,r.\u0275fac=function(P){return new(P||r)},r.\u0275cmp=I({type:r,selectors:[["app-product-detail"]],standalone:!0,features:[E],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[2,"font-size","2em"],[1,"d-flex","justify-content-start","align-items-center"],[1,"fa","fa-minus-circle","text-warning","mr-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"font-weight-bold",2,"font-size","1.5em"],[1,"fa","fa-plus-circle","text-warning","mx-2",2,"cursor","pointer","font-size","2em",3,"click"],[1,"btn","btn-warning","btn-lg","mt-5",3,"click"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(P,Pt){P&1&&(a(0,"div",0),f(1,It,22,8,"div",1),o()),P&2&&(s(),m("ngIf",Pt.product))},dependencies:[k,w,A]});let n=r;return n})();var Et=n=>({active:n});function wt(n,i){if(n&1){let t=C();a(0,"li",2)(1,"a",3),g("click",function(){let r=_(t).$implicit,p=u(2);return x(p.onPagerChange(r))}),l(2),o()()}if(n&2){let t=i.$implicit,c=u(2);m("ngClass",j(2,Et,t===c.pageNumber)),s(2),b(t)}}var Ct=n=>({disabled:n});function kt(n,i){if(n&1){let t=C();a(0,"nav")(1,"ul",1)(2,"li",2)(3,"a",3),g("click",function(){_(t);let e=u();return x(e.onPagerChange(e.pageNumber-1))}),l(4,"Previous"),o()(),f(5,wt,3,4,"li",4),a(6,"li",2)(7,"a",3),g("click",function(){_(t);let e=u();return x(e.onPagerChange(e.pageNumber+1))}),l(8,"Next"),o()()()()}if(n&2){let t=u();s(2),m("ngClass",j(3,Ct,t.pageNumber===1)),s(3),m("ngForOf",t.getArrayData()),s(),m("ngClass",j(5,Ct,t.pageNumber===t.totalPages))}}var vt=(()=>{let i=class i{constructor(){this.pageChanged=new G}getArrayData(){return Array.from({length:this.totalPages},(c,e)=>e+1)}onPagerChange(c){c>0&&c<=this.totalPages&&c!==this.pageNumber&&this.pageChanged.emit(c)}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=I({type:i,selectors:[["app-pager"]],inputs:{totalElements:"totalElements",totalPages:"totalPages",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},standalone:!0,features:[E],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pagination","justify-content-end"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"]],template:function(e,r){e&1&&f(0,kt,9,7,"nav",0),e&2&&m("ngIf",r.totalPages>1)},dependencies:[k,et,q,w]});let n=i;return n})();function Tt(n,i){n&1&&(a(0,"span"),l(1,"..."),o())}function Vt(n,i){if(n&1){let t=C();a(0,"button",10),g("click",function(){_(t);let e=u();return x(e.addItemToCart(e.product.id))}),l(1,"Add to Cart "),o()}}function Ft(n,i){if(n&1){let t=C();a(0,"button",11),g("click",function(){_(t);let e=u();return x(e.removeItemFromCart(e.product.id))}),l(1,"Remove from Cart "),o()}}var yt=(()=>{var i;let t=class t{constructor(){v(this,i,void 0);y(this,i,S(U)),this.shop=pt,this.isContains=!1,this.cart$=d(this,i).cart$}ngOnInit(){this.cart$.subscribe({next:e=>{e?this.checkItemExistsInCart(e.cartItems):this.isContains=!1},error:e=>console.error(e)})}checkItemExistsInCart(e){this.isContains=e&&ft(e,this.product.id)}addItemToCart(e){d(this,i).editCart({productId:e,quantity:1}).subscribe({next:r=>this.checkItemExistsInCart(r),error:r=>console.error(r)})}removeItemFromCart(e){d(this,i).removeItemFromCart(e).subscribe({next:r=>this.checkItemExistsInCart(r),error:r=>console.error(r)})}};i=new WeakMap,t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=I({type:t,selectors:[["app-product-item"]],inputs:{product:"product"},standalone:!0,features:[E],decls:14,vars:14,consts:[[1,"card","h-100","shadow-sm"],[1,"image","position-relative",2,"cursor","pointer"],[1,"img-fluid","bg-info",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[3,"routerLink"],[1,"text-uppercase"],[4,"ngIf"],[1,"mb-2"],["type","button","class","btn btn-warning",3,"click",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,p){r&1&&(a(0,"div",0)(1,"div",1),T(2,"img",2),o(),a(3,"div",3)(4,"a",4)(5,"h6",5),l(6),N(7,"slice"),f(8,Tt,2,0,"span",6),o()(),a(9,"span",7),l(10),N(11,"currency"),o(),f(12,Vt,2,0,"button",8)(13,Ft,2,0,"button",9),o()()),r&2&&(s(2),M("alt",p.product.name),m("src",p.product.pictureUrl||"/default.png",$),s(2),m("routerLink","/"+p.shop+"/"+p.product.id),s(2),V(" ",tt(7,8,p.product.name,0,20)," "),s(2),m("ngIf",p.product.name.length<20),s(2),b(R(11,12,p.product.unitPrice)),s(2),m("ngIf",!p.isContains),s(),m("ngIf",p.isContains))},dependencies:[ct,st,k,w,it,A],styles:[".btn[_ngcontent-%COMP%]{border-radius:0}"]});let n=t;return n})();function Nt(n,i){if(n&1&&(a(0,"span"),l(1," Showing "),a(2,"strong"),l(3),o(),l(4," of "),a(5,"strong"),l(6),o(),l(7," Results "),o()),n&2){let t=u();s(3),Z("",t.pageNumber*t.pageSize+1," - ",t.pageNumber*t.pageSize+t.pageSize>t.totalElements?t.totalElements:t.pageNumber*t.pageSize+t.pageSize,""),s(3),b(t.totalElements)}}function zt(n,i){n&1&&(a(0,"span"),l(1," There are "),a(2,"strong"),l(3,"0"),o(),l(4," results for this filter "),o())}var St=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=I({type:i,selectors:[["app-paging-header"]],inputs:{totalElements:"totalElements",pageSize:"pageSize",pageNumber:"pageNumber"},standalone:!0,features:[E],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(e,r){e&1&&(a(0,"header"),f(1,Nt,8,3,"span",0)(2,zt,5,0,"span",0),o()),e&2&&(s(),m("ngIf",r.totalElements&&r.totalElements>0),s(),m("ngIf",r.totalElements===0))},dependencies:[k,w]});let n=i;return n})();var Dt=["search"];function Ot(n,i){if(n&1&&(a(0,"option",20),l(1),o()),n&2){let t=i.$implicit,c=u(2);m("selected",c.shopParams.sort===t.value)("value",t.value),s(),V("",t.name," ")}}function $t(n,i){if(n&1){let t=C();a(0,"li",21),g("click",function(){let r=_(t).$implicit,p=u(2);return x(p.onBrandSelected(r.id))}),l(1),o()}if(n&2){let t=i.$implicit,c=u(2);Q("active",t.id===c.shopParams.brand),m("value",t.id),s(),V("",t.name," ")}}function Mt(n,i){if(n&1){let t=C();a(0,"li",21),g("click",function(){let r=_(t).$implicit,p=u(2);return x(p.onTypeSelected(r.id))}),l(1),o()}if(n&2){let t=i.$implicit,c=u(2);Q("active",t.id===c.shopParams.type),m("value",t.id),s(),V("",t.name," ")}}function jt(n,i){if(n&1){let t=C();J(0),a(1,"h5",14),l(2,"Sort"),o(),a(3,"select",15),g("change",function(e){_(t);let r=u();return x(r.onSortSelected(e.target.value))}),f(4,Ot,2,3,"option",16),o(),a(5,"h5",17),l(6,"Brands"),o(),a(7,"ul",18),f(8,$t,2,4,"li",19),o(),a(9,"h5",17),l(10,"Types"),o(),a(11,"ul",18),f(12,Mt,2,4,"li",19),o(),K()}if(n&2){let t=u();s(4),m("ngForOf",t.sortOptions),s(4),m("ngForOf",t.brands),s(4),m("ngForOf",t.types)}}function Rt(n,i){if(n&1&&(a(0,"div",22),T(1,"app-product-item",23),o()),n&2){let t=i.$implicit;s(),m("product",t)}}function qt(n,i){if(n&1){let t=C();a(0,"div",24)(1,"app-pager",25),g("pageChanged",function(e){_(t);let r=u();return x(r.onPageChanged(e-1))}),o()()}if(n&2){let t=u();s(),m("totalElements",t.totalElements)("totalPages",t.totalPages)("pageSize",t.shopParams.size)("pageNumber",t.shopParams.page+1)}}var bt=(()=>{var i;let t=class t{constructor(){v(this,i,void 0);y(this,i,S(B)),this.sortOptions=[{name:"Alphabetical",value:"name,asc"},{name:"Price: Low to High",value:"unitPrice,asc"},{name:"Price: High to Low",value:"unitPrice,desc"}],this.shopParams=d(this,i).getShopParams(),this.getProducts(),this.getBrands(),this.getTypes()}ngOnInit(){}getProducts(){d(this,i).products$().subscribe({next:e=>{let r=e.data.page,{totalElements:p,totalPages:h}=r;this.totalElements=p,this.totalPages=h,this.products=r.content},error:e=>console.error(e)})}getBrands(){d(this,i).brands$().subscribe({next:e=>this.brands=[{id:null,name:"All"},...e],error:e=>console.log(e)})}getTypes(){d(this,i).types$().subscribe({next:e=>this.types=[{id:null,name:"All"},...e],error:e=>console.log(e)})}filterData(e){d(this,i).setShopParams(e),this.getProducts()}onBrandSelected(e){let r=d(this,i).getShopParams();r.brand=e,r.page=0,this.filterData(r)}onTypeSelected(e){let r=d(this,i).getShopParams();r.type=e,r.page=0,this.filterData(r)}onSortSelected(e){let r=d(this,i).getShopParams();r.sort=e,this.filterData(r)}onPageChanged(e){let r=d(this,i).getShopParams();r.page!==e&&(r.page=e,this.filterData(r))}onSearch(){let e=d(this,i).getShopParams();e.name=this.searchTerm.nativeElement.value,e.page=0,this.filterData(e)}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value=""),this.shopParams=new F,d(this,i).setShopParams(this.shopParams),this.getProducts()}};i=new WeakMap,t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=I({type:t,selectors:[["app-shop"]],viewQuery:function(r,p){if(r&1&&W(Dt,5),r&2){let h;X(h=Y())&&(p.searchTerm=h.first)}},standalone:!0,features:[E],decls:17,vars:6,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalElements","pageSize","pageNumber"],[1,"form-inline"],["placeholder","Search","type","text",1,"form-control","mr-2",2,"width","300px",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","my-2",3,"click"],[1,"btn","btn-outline-success","ml-2","my-2",3,"click"],["class","col-4 mb-4",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"text-warning","ml-3","mt-4","mb-3"],[1,"custom-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"text-warning","ml-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"value","click"],[1,"col-4","mb-4"],[3,"product"],[1,"d-flex","justify-content-center"],[3,"totalElements","totalPages","pageSize","pageNumber","pageChanged"]],template:function(r,p){r&1&&(a(0,"div",0)(1,"div",1)(2,"section",2),f(3,jt,13,3,"ng-container",3),o(),a(4,"section",4)(5,"div",5),T(6,"app-paging-header",6),a(7,"div",7)(8,"input",8,9),g("keyup.enter",function(){return p.onSearch()}),o(),a(10,"button",10),g("click",function(){return p.onSearch()}),l(11," Search "),o(),a(12,"button",11),g("click",function(){return p.onReset()}),l(13," Reset "),o()()(),a(14,"div",1),f(15,Rt,2,1,"div",12),o(),f(16,qt,2,4,"div",13),o()()()),r&2&&(s(3),m("ngIf",p.types&&p.brands),s(3),m("totalElements",p.totalElements)("pageSize",p.shopParams.size)("pageNumber",p.shopParams.page),s(9),m("ngForOf",p.products),s(),m("ngIf",p.totalElements>0))},dependencies:[vt,yt,St,k,q,w]});let n=t;return n})();var Ue=[{path:"",component:bt},{path:":id",component:xt}];export{Ue as SHOP_ROUTES};
